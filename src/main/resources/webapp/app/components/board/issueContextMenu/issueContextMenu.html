<div *ngIf="displayContextMenu" class="issue-context-menu"
     [ngStyle]="{'top': data.y, 'left' : data.x}">
    <div>
        <a href="move" (click)="onShowMovePanel($event)" class="context"><img src="images/move-2x.png" width="12px" height="12px" align="center"/>Move...</a>
    </div>
</div>

<div *ngIf="move" id="issue-move-panel" (window:resize)="onResize($event)" [style.top]="movePanelTop" [style.left]="movePanelLeft">
    <div class="header">
        <div class="header-text">Move {{issue.key}}</div>
        <div class="header-close-button">
            <a href="close" class="close" (click)="onClickClose($event)">X</a>
        </div>
    </div>

    <div class="content">
        <div class="issue-column">
            <issue [issue]="issue"></issue>
        </div>
        <div class="column">
            <div class="column-header">Select state:</div>
            <div class="states">
                <div *ngFor="#state of moveStates" [ngClass]="state === toState ? 'entry-selected' : 'entry'">
                    <div class="rank">
                        <a href="rank" (click)="onSelectRankState($event, state)"
                           *ngIf="isValidRankState(state)"
                           title="Move to {{state}} and rank the issue">
                            <img src="images/resize-height-2x.png" width="12px" height="12px" align="center"/></a>
                        <span *ngIf="!isValidRankState(state)">&nbsp;</span>
                    </div>
                    <div *ngIf="isValidMoveState(state)" class="state-link">
                        <a href="{{state}}" (click)="onSelectMoveState($event, state)"
                           [ngClass]="state === toState ? 'entry-selected' : 'entry'"
                           title="Move to {{state}}"><b>{{state}}</b></a>
                    </div>
                    <span *ngIf="!isValidMoveState(state)" title="This is not a valid state for {{issue.projectCode}}"><i>{{state}}</i></span>
                </div>
            </div>
        </div>
        <div class="column" [hidden]="!issuesForState">
            <div class="column-header">Insert before:</div>
            <div class="issues">
                <div *ngIf="toState"  class="entry" [ngClass]="'' === insertBeforeIssueKey ? 'entry-selected' : 'entry'">
                    <a href="move" (click)="onSelectRankIssue($event, '')"
                       [ngClass]="'' === insertBeforeIssueKey ? 'entry-selected' : 'entry'"><b>- END -</b></a>
                </div>
                <div>&nbsp;</div>
                <div *ngFor="#issue of issuesForState"
                     [ngClass]="isIssueSelected(issue) ? 'entry-selected' : 'entry'">
                    <a href="move" (click)="onSelectRankIssue($event, issue.key)" title="{{issue.key}} - {{issue.summary}}"
                       [ngClass]="isIssueSelected(issue) ? 'entry-selected' : 'entry'"><b>{{issue.key}}</b> - {{issue.summary}}</a>
                </div>
            </div>
        </div>
    </div>
</div>